(this["webpackJsonpsg-demo"]=this["webpackJsonpsg-demo"]||[]).push([[25],{1284:function(e,t,a){"use strict";a.r(t);var n=a(9),i=a(42),l=a(43),r=a(53),c=a(52),s=a(0),o=a.n(s),u=a(1278),d=a(611),m=a(209),h=a(419),f=a(420),p=a(758),g=a(36),b=a(411),E=a(416),y=a(1259),O=a(38);function v(e){return Object(O.a)({url:"/trades/list",method:"post",data:e})}function S(e){return Object(O.a)({url:"/trades/delete",method:"post",data:e})}function k(e){return Object(O.a)({url:"/trades/edit",method:"post",data:e})}var w=a(406),C=a(1282),D=a(1277),j=a(444),I=a.n(j);a(1206);I.a.locale("zh-cn");var M=function(e){Object(r.a)(a,e);var t=Object(c.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=e.onOk,i=e.form,l=e.confirmLoading,r=e.currentRowData,c=i.getFieldDecorator,s=r.id,u=r.author,d=r.date,m=r.spread,g=r.star,b=r.status,E=r.title,y={labelCol:{sm:{span:4}},wrapperCol:{sm:{span:16}}};return o.a.createElement(w.a,{title:"Edit",visible:t,onCancel:a,onOk:n,confirmLoading:l},o.a.createElement(h.a,y,o.a.createElement(h.a.Item,{label:"Id:"},c("id",{initialValue:s})(o.a.createElement(f.a,{disabled:!0}))),o.a.createElement(h.a.Item,{label:"Title:"},c("title",{rules:[{required:!0,message:"Please input title!"}],initialValue:E})(o.a.createElement(f.a,{placeholder:"Title"}))),o.a.createElement(h.a.Item,{label:"Author:"},c("author",{initialValue:u})(o.a.createElement(f.a,{disabled:!0}))),o.a.createElement(h.a.Item,{label:"Spread:"},c("spread",{initialValue:m})(o.a.createElement(f.a,{disabled:!0}))),o.a.createElement(h.a.Item,{label:"Risk:"},c("star",{initialValue:g.length})(o.a.createElement(C.a,{count:3}))),o.a.createElement(h.a.Item,{label:"Status:"},c("status",{initialValue:b})(o.a.createElement(p.a,{style:{width:120}},o.a.createElement(p.a.Option,{value:"bought"},"bought"),o.a.createElement(p.a.Option,{value:"sold"},"sold")))),o.a.createElement(h.a.Item,{label:"DateTime:"},c("date",{rules:[{type:"object",required:!0,message:"Please choose date!"}],initialValue:I()(d||"YYYY-MM-DD HH:mm:ss")})(o.a.createElement(D.a,{showTime:!0,format:"YYYY-MM-DD HH:mm:ss"})))))}}]),a}(s.Component),Q=h.a.create({name:"EditForm"})(M),V=u.a.Column,Y=d.a.Panel,R=function(e){Object(r.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(i.a)(this,a);for(var l=arguments.length,r=new Array(l),c=0;c<l;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r)))._isMounted=!1,e.state={list:[],loading:!1,total:0,listQuery:{pageNumber:1,pageSize:10,title:"",star:"",status:""},editModalVisible:!1,editModalLoading:!1,currentRowData:{id:0,author:"",date:"",spread:0,star:"\u2605",status:"bought",title:""}},e.fetchData=function(){e.setState({loading:!0}),v(e.state.listQuery).then((function(t){e.setState({loading:!1});var a=t.data.data.items,n=t.data.data.total;e._isMounted&&e.setState({list:a,total:n})}))},e.filterTitleChange=function(t){var a=t.target.value;e.setState((function(e){return{listQuery:Object(n.a)(Object(n.a)({},e.listQuery),{},{title:a})}}))},e.filterStatusChange=function(t){e.setState((function(e){return{listQuery:Object(n.a)(Object(n.a)({},e.listQuery),{},{status:t})}}))},e.filterStarChange=function(t){e.setState((function(e){return{listQuery:Object(n.a)(Object(n.a)({},e.listQuery),{},{star:t})}}))},e.changePage=function(t,a){e.setState((function(e){return{listQuery:Object(n.a)(Object(n.a)({},e.listQuery),{},{pageNumber:t})}}),(function(){e.fetchData()}))},e.changePageSize=function(t,a){e.setState((function(e){return{listQuery:Object(n.a)(Object(n.a)({},e.listQuery),{},{pageNumber:1,pageSize:a})}}),(function(){e.fetchData()}))},e.handleDelete=function(t){S({id:t.id}).then((function(t){m.a.success("Deletion successful"),e.fetchData()}))},e.handleEdit=function(t){e.setState({currentRowData:Object.assign({},t),editModalVisible:!0})},e.handleOk=function(t){var a=e.formRef.props.form;a.validateFields((function(t,i){if(!t){var l=Object(n.a)(Object(n.a)({},i),{},{star:"".padStart(i.star,"\u2605"),date:i.date.format("YYYY-MM-DD HH:mm:ss")});e.setState({editModalLoading:!0}),k(l).then((function(t){a.resetFields(),e.setState({editModalVisible:!1,editModalLoading:!1}),m.a.success("Success!"),e.fetchData()})).catch((function(e){m.a.success("Failed!")}))}}))},e.handleCancel=function(t){e.setState({editModalVisible:!1})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.fetchData()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"app-container"},o.a.createElement(d.a,{defaultActiveKey:["1"]},o.a.createElement(Y,{header:"Filter",key:"1"},o.a.createElement(h.a,{layout:"inline"},o.a.createElement(h.a.Item,{label:"Title:"},o.a.createElement(f.a,{onChange:this.filterTitleChange})),o.a.createElement(h.a.Item,{label:"Type:"},o.a.createElement(p.a,{style:{width:120},onChange:this.filterStatusChange},o.a.createElement(p.a.Option,{value:"bought"},"bought"),o.a.createElement(p.a.Option,{value:"sold"},"sold"))),o.a.createElement(h.a.Item,{label:"Risk:"},o.a.createElement(p.a,{style:{width:120},onChange:this.filterStarChange},o.a.createElement(p.a.Option,{value:1},"\u2605"),o.a.createElement(p.a.Option,{value:2},"\u2605\u2605"),o.a.createElement(p.a.Option,{value:3},"\u2605\u2605\u2605"))),o.a.createElement(h.a.Item,null,o.a.createElement(g.a,{type:"primary",icon:"search",onClick:this.fetchData},"Search"))))),o.a.createElement("br",null),o.a.createElement(u.a,{bordered:!0,rowKey:function(e){return e.id},dataSource:this.state.list,loading:this.state.loading,pagination:!1},o.a.createElement(V,{title:"Id",dataIndex:"id",key:"id",width:200,align:"center",sorter:function(e,t){return e.id-t.id}}),o.a.createElement(V,{title:"Title",dataIndex:"title",key:"title",width:200,align:"center"}),o.a.createElement(V,{title:"Author",dataIndex:"author",key:"author",width:100,align:"center"}),o.a.createElement(V,{title:"Spread",dataIndex:"spread",key:"spread",width:195,align:"center"}),o.a.createElement(V,{title:"Risk",dataIndex:"star",key:"star",width:195,align:"center"}),o.a.createElement(V,{title:"Status",dataIndex:"status",key:"status",width:195,align:"center",render:function(e){var t="bought"===e?"green":"deleted"===e?"red":"";return o.a.createElement(b.a,{color:t,key:e},e)}}),o.a.createElement(V,{title:"DateTime",dataIndex:"date",key:"date",width:195,align:"center"}),o.a.createElement(V,{title:"Action",key:"action",width:195,align:"center",render:function(t,a){return o.a.createElement("span",null,o.a.createElement(g.a,{type:"primary",shape:"circle",icon:"edit",title:"Edit",onClick:e.handleEdit.bind(null,a)}),o.a.createElement(E.a,{type:"vertical"}),o.a.createElement(g.a,{type:"primary",shape:"circle",icon:"delete",title:"Delete",onClick:e.handleDelete.bind(null,a)}))}})),o.a.createElement("br",null),o.a.createElement(y.a,{total:this.state.total,pageSizeOptions:["10","20","40"],showTotal:function(e){return"".concat(e," items in total")},onChange:this.changePage,current:this.state.listQuery.pageNumber,onShowSizeChange:this.changePageSize,showSizeChanger:!0,showQuickJumper:!0,hideOnSinglePage:!0}),o.a.createElement(Q,{currentRowData:this.state.currentRowData,wrappedComponentRef:function(t){return e.formRef=t},visible:this.state.editModalVisible,confirmLoading:this.state.editModalLoading,onCancel:this.handleCancel,onOk:this.handleOk}))}}]),a}(s.Component);t.default=R}}]);
//# sourceMappingURL=Table.1dd59afc.chunk.js.map